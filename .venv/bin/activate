#!/usr/bin/env sh
# CLASSIFICATION: COMMUNITY
# Filename: .venv/bin/activate v0.2
# Author: Lukas Bower
# Date Modified: 2030-07-06
# shellcheck shell=sh

set -u

# Derive the Cohesix repository root from the surrounding shell context.
_cohesix_repo=""
if [ -n "${COHESIX_AUTO_VENV_ROOT-}" ]; then
    _cohesix_repo="$COHESIX_AUTO_VENV_ROOT"
elif [ -n "${COHESIX_REPO_ROOT-}" ]; then
    _cohesix_repo="$COHESIX_REPO_ROOT"
fi

if [ -z "$_cohesix_repo" ]; then
    _cohesix_repo="$HOME/Documents/GitHub/cohesix"
fi

_cohesix_runtime="$_cohesix_repo/.venv-runtime"

if [ ! -f "$_cohesix_runtime/bin/activate" ]; then
    echo "⚠️  Cohesix runtime virtual environment missing at $_cohesix_runtime." >&2
    echo "ℹ️  Run scripts/setup_build_env.sh to provision the Python environment." >&2
    unset _cohesix_repo _cohesix_runtime
    return 1 2>/dev/null || exit 1
fi

# shellcheck source=/dev/null
. "$_cohesix_runtime/bin/activate"

unset _cohesix_repo _cohesix_runtime
