// Author: Lukas Bower
// Purpose: Generated root-task manifest tables and helpers.
// @generated by coh-rtc; do not edit.

#![allow(clippy::all)]
#![allow(dead_code)]

use cohesix_ticket::Role;

mod bootstrap;

#[derive(Clone, Copy, Debug)]
pub struct TicketSpec {
    pub role: Role,
    pub secret: &'static str,
}

#[derive(Clone, Copy, Debug)]
pub struct NamespaceMount {
    pub service: &'static str,
    pub target: &'static [&'static str],
}

#[derive(Clone, Copy, Debug)]
pub struct CachePolicy {
    pub kernel_ops: bool,
    pub dma_clean: bool,
    pub dma_invalidate: bool,
    pub unify_instructions: bool,
}

#[derive(Clone, Copy, Debug)]
pub enum ShortWritePolicy {
    Reject,
    Retry,
}

#[derive(Clone, Copy, Debug)]
pub struct Secure9pLimits {
    pub msize: u32,
    pub walk_depth: u8,
    pub tags_per_session: u16,
    pub batch_frames: u16,
    pub short_write_policy: ShortWritePolicy,
}

#[derive(Clone, Copy, Debug)]
pub enum TelemetryFrameSchema {
    LegacyPlaintext,
    CborV1,
}

#[derive(Clone, Copy, Debug)]
pub struct TelemetryCursorConfig {
    pub retain_on_boot: bool,
}

#[derive(Clone, Copy, Debug)]
pub struct TelemetryConfig {
    pub ring_bytes_per_worker: u32,
    pub frame_schema: TelemetryFrameSchema,
    pub cursor: TelemetryCursorConfig,
}

pub const MANIFEST_SCHEMA: &str = "1.2";
pub const MANIFEST_SHA256: &str = "09e9cf4605174cbb41993b5c5035466b81edf24f70c08c89c49d535bfa01e9c3";
pub const TICKET_TABLE_SHA256: &str = bootstrap::TICKET_TABLE_SHA256;
pub const NAMESPACE_TABLE_SHA256: &str = bootstrap::NAMESPACE_TABLE_SHA256;
pub const AUDIT_TABLE_SHA256: &str = bootstrap::AUDIT_TABLE_SHA256;
pub const CACHE_POLICY: CachePolicy = bootstrap::CACHE_POLICY;
pub const SECURE9P_LIMITS: Secure9pLimits = bootstrap::SECURE9P_LIMITS;
pub const TELEMETRY_CONFIG: TelemetryConfig = bootstrap::TELEMETRY_CONFIG;
pub const EVENT_PUMP_FDS: &[&str] = &bootstrap::EVENT_PUMP_FDS;

pub const fn ticket_inventory() -> &'static [TicketSpec] {
    &bootstrap::TICKET_INVENTORY
}

pub const fn namespace_mounts() -> &'static [NamespaceMount] {
    &bootstrap::NAMESPACE_MOUNTS
}

pub const fn initial_audit_lines() -> &'static [&'static str] {
    &bootstrap::INITIAL_AUDIT_LINES
}

pub const fn cache_policy() -> CachePolicy {
    bootstrap::CACHE_POLICY
}

pub const fn secure9p_limits() -> Secure9pLimits {
    bootstrap::SECURE9P_LIMITS
}

pub const fn telemetry_config() -> TelemetryConfig {
    bootstrap::TELEMETRY_CONFIG
}

pub const fn event_pump_fds() -> &'static [&'static str] {
    &bootstrap::EVENT_PUMP_FDS
}

pub const TICKET_COUNT: usize = bootstrap::TICKET_INVENTORY.len();
