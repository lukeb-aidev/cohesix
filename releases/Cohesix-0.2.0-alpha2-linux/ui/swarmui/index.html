<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <title>SwarmUI</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="shell">
      <header class="cohesix-banner">
        <div class="banner-brand">
          <img
            class="cohesix-banner__logo"
            src="assets/icons/cohesix-header.svg"
            alt="Cohesix"
          />
          <div class="brand">
            <p class="eyebrow">SWARMUI</p>
            <p class="lede">
              Live Hive telemetry and activity.
            </p>
          </div>
        </div>
        <div class="status-bar">
          <div class="status-row summary">
            <span class="badge" id="hive-status">Hive idle</span>
            <span class="badge root ok" id="hive-root">ROOT OK</span>
            <span class="badge ghost" id="hive-sessions">Sessions 0 · draining 0</span>
          </div>
          <div class="status-row pressure-summary">
            <span class="badge ghost" id="hive-pressure">Pressure 0% · backlog 0 · dropped 0</span>
          </div>
          <div class="status-group" id="hive-pressure-strip">
            <span class="status-label">Pressure</span>
            <span class="chip" data-kind="busy">busy 0</span>
            <span class="chip" data-kind="quota">quota 0</span>
            <span class="chip" data-kind="cut">cut 0</span>
            <span class="chip" data-kind="policy">policy 0</span>
          </div>
          <div class="status-group" id="hive-error-strip">
            <span class="status-label">Errors</span>
            <span class="chip" data-kind="busy">busy 0</span>
            <span class="chip" data-kind="quota">quota 0</span>
            <span class="chip" data-kind="cut">cut 0</span>
            <span class="chip" data-kind="policy">policy 0</span>
          </div>
        </div>
      </header>
      <header class="topbar">
        <div class="session-block">
          <label class="label" for="session-role">Role</label>
          <select id="session-role" class="select">
            <option value="queen">queen</option>
            <option value="worker-heartbeat">worker-heartbeat</option>
            <option value="worker-gpu">worker-gpu</option>
            <option value="worker-bus">worker-bus</option>
            <option value="worker-lora">worker-lora</option>
          </select>
          <label class="label" for="session-subject">Subject</label>
          <input
            id="session-subject"
            class="input"
            type="text"
            placeholder="subject (required for worker tickets)"
          />
          <label class="label" for="session-ticket">Ticket</label>
          <input
            id="session-ticket"
            class="input"
            type="text"
            placeholder="ticket (optional)"
          />
        </div>
        <div class="session-actions">
          <button id="connect" class="action primary">
            <span data-icon="plug"></span>
            Connect
          </button>
          <button id="offline" class="action ghost">
            <span data-icon="cloud-slash"></span>
            Offline mode
          </button>
          <button id="mint-ticket" class="action">
            <span data-icon="pulse"></span>
            Mint ticket
          </button>
          <span class="badge ghost" id="mint-status">Ticket idle</span>
        </div>
      </header>

      <section class="layout">
        <aside class="sidebar">
          <article class="panel">
            <header>
              <h2>Live Hive Controls</h2>
              <p>Render-only simulation fed by telemetry streams or snapshots.</p>
            </header>
            <div class="panel-body">
              <div class="field">
                <label class="label" for="hive-snapshot-key">Snapshot key</label>
                <input
                  id="hive-snapshot-key"
                  class="input"
                  type="text"
                  value="demo"
                />
              </div>
              <div class="field hint mono">
                Offline mode reads cached CBOR snapshots; trace replay uses CLI
                `--replay-trace` (snapshots use `--replay`).
              </div>
            </div>
            <footer class="panel-footer split">
              <button id="hive-start" class="action primary">
                <span data-icon="play"></span>
                Start
              </button>
              <button id="hive-stop" class="action">
                <span data-icon="stop"></span>
                Stop
              </button>
            </footer>
          </article>

          <article class="panel">
            <header>
              <h2>Telemetry Rings</h2>
              <p>Tail worker telemetry streams on demand.</p>
            </header>
            <div class="panel-body mono" id="telemetry-output">
              <p class="placeholder">No telemetry loaded.</p>
            </div>
            <footer class="panel-footer split">
              <input
                id="worker-id"
                class="input"
                type="text"
                placeholder="worker-<id>"
              />
              <button id="load-telemetry" class="action">
                <span data-icon="pulse"></span>
                Load telemetry
              </button>
            </footer>
          </article>

          <article class="panel">
            <header>
              <h2>Fleet Map</h2>
              <p>Read-only ingest snapshots and worker presence.</p>
            </header>
            <div class="panel-body mono" id="fleet-output">
              <p class="placeholder">Awaiting ingest snapshot.</p>
            </div>
            <footer class="panel-footer">
              <button id="load-fleet" class="action">
                <span data-icon="map-trifold"></span>
                Load fleet
              </button>
            </footer>
          </article>
        </aside>

        <section class="main">
          <article class="panel hive-panel">
            <header class="panel-header">
              <div>
                <h2>Live Hive Canvas</h2>
                <p>Agents, pollen, heat, and error pulses rendered in WebGL.</p>
              </div>
              <button id="hive-reset-view" class="action ghost">
                <span data-icon="crosshair"></span>
                Reset view
              </button>
            </header>
            <div class="panel-body hive-body">
              <div id="hive-canvas" class="hive-canvas">
                <div class="hive-fallback" id="hive-fallback" role="status" aria-live="polite"></div>
              </div>
              <div class="hive-overlay mono">
                <span class="badge soft">Zoom with trackpad / scroll</span>
                <span class="badge soft">Drag to pan</span>
              </div>
            </div>
          </article>

          <article class="panel wide">
            <header>
              <h2>Namespace Browser</h2>
              <p>Browse /proc, /queen, /worker, /log, /gpu (read-only).</p>
            </header>
            <div class="panel-body mono" id="namespace-output">
              <p class="placeholder">Select a root to list entries.</p>
            </div>
            <footer class="panel-footer split">
              <select id="namespace-root" class="select">
                <option value="/proc">/proc</option>
                <option value="/queen">/queen</option>
                <option value="/worker">/worker</option>
                <option value="/log">/log</option>
                <option value="/gpu">/gpu</option>
              </select>
              <button id="load-namespace" class="action">
                <span data-icon="folder-open"></span>
                List entries
              </button>
            </footer>
          </article>

          <article class="panel wide console-panel">
            <header class="panel-header">
              <div>
                <h2>Console</h2>
                <p>Interactive cohsh prompt over the shared TCP console session.</p>
              </div>
              <div class="console-actions">
                <button id="console-clear" class="action ghost">Clear</button>
                <button id="console-stop" class="action">
                  <span data-icon="stop"></span>
                  Stop
                </button>
              </div>
            </header>
            <div class="panel-body console-body">
              <div
                class="console-output mono"
                id="console-output"
                role="log"
                aria-live="polite"
              >
                <p class="placeholder">Console idle.</p>
              </div>
            </div>
            <footer class="panel-footer console-footer">
              <div class="console-input">
                <span class="console-prompt">coh&gt;</span>
                <input
                  id="console-input"
                  class="input mono"
                  type="text"
                  placeholder="help · attach queen · log · tail /log/queen.log"
                />
              </div>
              <button id="console-send" class="action primary">
                <span data-icon="play"></span>
                Send
              </button>
            </footer>
          </article>
        </section>
      </section>
    </main>

    <script src="vendor/pixi.min.js"></script>
    <script type="module" src="app.js"></script>
  </body>
</html>
