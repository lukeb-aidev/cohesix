# Author: Lukas Bower
# Purpose: Validate /proc/ingest/watch output and deterministic ERR handling.
attach queen
EXPECT OK

# Tail watch node to confirm line-oriented output.
tail /proc/ingest/watch
EXPECT OK
EXPECT SUBSTR path=/proc/ingest/watch

# Rapid polling to induce watch back-pressure throttling.
tail /proc/ingest/watch
EXPECT OK
tail /proc/ingest/watch
EXPECT OK

# Unsupported node should return deterministic ERR.
cat /proc/ingest/unsupported
EXPECT ERR

quit
EXPECT OK
